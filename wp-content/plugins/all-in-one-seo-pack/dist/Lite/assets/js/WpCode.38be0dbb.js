import{m as $,a as _}from"./vuex.esm-bundler.2e787911.js";import{C as b}from"./Index.25975920.js";import{C as w}from"./index.c8bcf9e5.js";import{G as U,a as A}from"./Row.3c6833bf.js";import{_ as L,c as g,a,d as k,w as s,B as W,b as l,f as m,r as d,o as r,F as O,G as x,t as n,y as p}from"./_plugin-vue_export-helper.1252226d.js";import"./default-i18n.ab92175e.js";import"./_commonjsHelpers.f84db168.js";import"./Caret.21cdd163.js";const I={components:{Cta:b,CoreAlert:w,GridColumn:U,GridRow:A},data(){return{loadingUseSnippet:null,failed:!1,activationLoading:!1,strings:{codesnippets:this.$t.__("Code Snippets",this.$td),installSnippet:this.$t.__("Use Snippet",this.$td),editSnippet:this.$t.__("Edit Snippet",this.$td),ctaDescription:this.$t.__("Using WPCode you can install AIOSEO code snippets with 1-click directly from this page or the WPCode library inside the WordPress admin.",this.$td),ctaLearnMoreText:this.$t.__("Learn More about WPCode Snippets",this.$td),noSnippets:this.$t.__("We encountered an error loading the code snippets, please try again later.",this.$td),activateError:this.$t.__("An error occurred while activating the addon. Please upload it manually or contact support for more information.",this.$td),permissionWarning:this.$t.__("You currently don't have permission to activate this addon. Please ask a site administrator to activate first.",this.$td)}}},computed:{...$("wpcode",["snippets","pluginInstalled","pluginActive","pluginNeedsUpdate","ctaUrl"]),showSnippets(){return this.pluginInstalled&&this.pluginActive&&!this.pluginNeedsUpdate},blurClass(){return this.showSnippets?"":"aioseo-blur"},ctaTitle(){if(this.pluginNeedsUpdate)return this.$t.__("Please Update WPCode to load the AIOSEO Snippet Library",this.$td);if(this.pluginInstalled){if(!this.pluginActive)return this.$t.__("Please Activate WPCode to load the AIOSEO Snippet Library",this.$td)}else return this.$t.__("Please Install WPCode to load the AIOSEO Snippet Library",this.$td);return this.$t.__("Please Install WPCode to load the AIOSEO Snippet Library",this.$td)},ctaButtonText(){if(this.pluginNeedsUpdate)return this.$t.__("Update WPCode",this.$td);if(this.pluginInstalled){if(!this.pluginActive)return this.$t.__("Activate WPCode",this.$td)}else return this.$t.__("Install WPCode",this.$td);return this.$t.__("Install WPCode",this.$td)}},methods:{..._(["installPlugins","upgradePlugins"]),..._("wpcode",["loadSnippets"]),processUpdateOrActivate(){this.activateOrUpdate(this.pluginNeedsUpdate)},activateOrUpdate(i=!1){this.failed=!1,this.activationLoading=!0;const u=i?"upgradePlugins":"installPlugins",c=this.$aioseo.plugins.wpcodePro.installed?"wpcodePro":"wpcode";this[u]([{plugin:c,type:"plugin"}]).then(t=>{if(t.body.failed.length){this.activationLoading=!1,this.failed=!0;return}const e=[this.loadSnippets()];Promise.all(e).then(()=>{this.activationLoading=!1})}).catch(t=>{this.activationLoading=!1,this.failed=!0,console.error(`Unable to install ${c}: ${t}`)})},decodeHTMLEntities(i){return this.$tags.decodeHTMLEntities(i)}}},E={class:"aioseo-tools-wpcode"},N={class:"aioseo-wpcode-snippet"},T={class:"wpcode-snippet-body"},B={class:"snippet-title"},M={class:"snippet-description"},D={class:"wpcode-snippet-footer"};function G(i,u,f,c,t,e){const h=d("base-button"),y=d("grid-column"),v=d("grid-row"),C=d("cta"),S=d("core-alert");return r(),g("div",E,[a("div",{class:W(e.blurClass)},[k(v,null,{default:s(()=>[(r(!0),g(O,null,x(i.snippets,(o,P)=>(r(),l(y,{key:P,sm:"12",md:"6",lg:"4"},{default:s(()=>[a("div",N,[a("div",T,[a("div",B,n(o.title),1),a("div",M,n(o.note),1)]),a("div",D,[o.install?(r(),l(h,{key:0,type:"blue",size:"medium",tag:"a",href:e.decodeHTMLEntities(o.install),onClick:V=>t.loadingUseSnippet=o.install,loading:o.install===t.loadingUseSnippet},{default:s(()=>[p(n(o.installed?t.strings.editSnippet:t.strings.installSnippet),1)]),_:2},1032,["href","onClick","loading"])):(r(),l(h,{key:1,type:"gray",size:"medium",disabled:""},{default:s(()=>[p(n(t.strings.installSnippet),1)]),_:1}))])])]),_:2},1024))),128))]),_:1})],2),!e.showSnippets&&i.snippets.length?(r(),l(C,{key:0,"button-text":e.ctaButtonText,"learn-more-link":i.$links.getDocUrl("wpcode"),"cta-button-loading":t.activationLoading,onCtaButtonClick:e.processUpdateOrActivate,"same-tab":"","align-top":"","cta-button-action":""},{"header-text":s(()=>[p(n(e.ctaTitle),1)]),description:s(()=>[p(n(t.strings.ctaDescription),1)]),"learn-more-text":s(()=>[p(n(t.strings.ctaLearnMoreText),1)]),_:1},8,["button-text","learn-more-link","cta-button-loading","onCtaButtonClick"])):m("",!0),e.showSnippets&&i.snippets.length===0?(r(),l(S,{key:1,type:"yellow"},{default:s(()=>[a("div",null,n(t.strings.noSnippets),1)]),_:1})):m("",!0)])}const K=L(I,[["render",G]]);export{K as default};
