import{g as P}from"./params.597cd0f5.js";import"./WpTable.6ebd2781.js";import"./default-i18n.ab92175e.js";import"./constants.449145d5.js";import{_ as v,r as c,o as a,c as l,a as n,e as p,t as r,f as o,b as h,w as u,y as f,B as k,d as g,D as C}from"./_plugin-vue_export-helper.1252226d.js";import"./index.fef507ce.js";import"./SaveChanges.03404395.js";import{U as A}from"./Url.c71d5763.js";import{a as b,c as N}from"./vuex.esm-bundler.2e787911.js";import{C as L}from"./index.c8bcf9e5.js";import{C as S,S as Z}from"./Caret.21cdd163.js";import{C as B}from"./Index.67d5329e.js";import{C as $}from"./Tooltip.ce066015.js";const q={components:{CoreAlert:L,CoreLoader:S,CoreModal:B,CoreTooltip:$,SvgClose:Z},mixins:[A],props:{feature:{type:Object,required:!0},canActivate:{type:Boolean,default(){return!0}},canManage:{type:Boolean,default(){return!1}},staticCard:Boolean},data(){return{showNetworkModal:!1,failed:!1,loading:!1,activated:!1,featureUpgrading:!1,strings:{version:this.$t.__("Version",this.$td),updateToVersion:this.$t.__("Update to version",this.$td),activated:this.$t.__("Activated",this.$td),deactivated:this.$t.__("Deactivated",this.$td),notInstalled:this.$t.__("Not Installed",this.$td),upgradeToPro:this.$t.__("Upgrade to Pro",this.$td),upgradeYourPlan:this.$t.__("Upgrade Your Plan",this.$td),updateFeature:this.$t.__("Update Addon",this.$td),permissionWarning:this.$t.__("You currently don't have permission to update this addon. Please ask a site administrator to update.",this.$td),manage:this.$t.__("Manage",this.$td),activateError:this.$t.__("An error occurred while activating the addon. Please upload it manually or contact support for more information.",this.$td),updateRequired:this.$t.sprintf(this.$t.__("An update is required for this addon to continue to work with %1$s %2$s.",this.$td),"AIOSEO","Pro"),areYouSureNetworkChange:this.$t.__("This is a network-wide change.",this.$td),yesProcessNetworkChange:this.$t.__("Yes, process this network change",this.$td),noChangedMind:this.$t.__("No, I changed my mind",this.$td)}}},computed:{networkChangeMessage(){return this.activated?this.$t.__("Are you sure you want to activate this addon across the network?",this.$td):this.$t.__("Are you sure you want to deactivate this addon across the network?",this.$td)}},methods:{...b(["deactivatePlugins","installPlugins","upgradePlugins"]),...N(["updateAddon"]),closeNetworkModal(e=!1){this.activated=e?this.activated:!this.activated,this.showNetworkModal=!1,e&&this.actuallyProcessStatusChange(e)},processStatusChange(){if(this.activated=!this.activated,this.$aioseo.data.isNetworkAdmin){this.showNetworkModal=!0;return}this.actuallyProcessStatusChange()},actuallyProcessStatusChange(){this.failed=!1,this.loading=!0;const e=this.activated?"installPlugins":"deactivatePlugins";this[e]([{plugin:this.feature.basename}]).then(i=>{this.loading=!1,i.body.failed.length&&(this.activated=!this.activated,this.failed=!0)}).catch(()=>{this.loading=!1,this.activated=!this.activated})},processUpgradeFeature(){this.failed=!1,this.featureUpgrading=!0;const e=this.$addons.getAddon(this.feature.sku);this.upgradePlugins([{plugin:this.feature.sku}]).then(i=>{if(this.featureUpgrading=!1,i.body.failed.length){this.activated=!1,this.failed=!0;return}this.activated=!0;const t=i.body.completed[e.sku];e.hasMinimumVersion=!0,e.isActive=!0,e.installedVersion=t.installedVersion,this.updateAddon(e)}).catch(()=>{this.featureUpgrading=!1,this.activated=!1})}},mounted(){this.feature.isActive&&(this.activated=!0);const e=P();!this.activated&&e["aioseo-activate"]&&e["aioseo-activate"]===this.feature.sku&&(this.loading=!0,this.activated=!0,this.installPlugins([{plugin:this.feature.basename}]).then(()=>this.loading=!1).catch(()=>{this.loading=!1,this.activated=!this.activated}))}},I={class:"aioseo-feature-card"},T={class:"feature-card-header"},Y={class:"feature-card-description"},F={key:0,class:"learn-more"},z=["href"],R=["href"],E={key:1,class:"learn-more"},O=["href"],D=["href"],G={key:0,class:"feature-card-install-activate"},W={key:1,class:"version"},j={class:"status"},x={key:1,class:"feature-card-upgrade-cta"},J={key:0},K={key:1},Q={key:2,class:"feature-card-upgrade-cta"},X={class:"version"},ee={key:0},te={class:"aioseo-modal-body"},se={class:"reset-description"};function ae(e,i,t,ke,s,d){const y=c("core-alert"),w=c("core-loader"),V=c("base-toggle"),_=c("base-button"),M=c("core-tooltip"),U=c("svg-close"),H=c("core-modal");return a(),l("div",I,[n("div",{class:k(["feature-card-body",{static:t.staticCard}])},[n("div",T,[p(e.$slots,"title")]),n("div",Y,[p(e.$slots,"description"),(!s.activated||t.feature.requiresUpgrade)&&!t.staticCard?(a(),l("div",F,[n("a",{href:e.$links.utmUrl("feature-manager-addon-link",t.feature.sku,t.feature.learnMoreUrl),target:"_blank"},r(e.$constants.GLOBAL_STRINGS.learnMore),9,z),n("a",{href:e.$links.utmUrl("feature-manager-addon-link",t.feature.sku,t.feature.learnMoreUrl),class:"no-underline",target:"_blank"}," →",8,R)])):o("",!0),t.feature.manageUrl&&(s.activated&&!t.feature.requiresUpgrade||t.staticCard)&&t.canManage?(a(),l("div",E,[n("a",{href:e.getHref(t.feature.manageUrl)},r(s.strings.manage),9,O),n("a",{href:e.getHref(t.feature.manageUrl),class:"no-underline"}," → ",8,D)])):o("",!0),s.failed?(a(),h(y,{key:2,class:"install-failed",type:"red"},{default:u(()=>[f(r(s.strings.activateError),1)]),_:1})):o("",!0)])],2),t.canActivate?(a(),l("div",{key:0,class:k(["feature-card-footer",{"upgrade-required":t.feature.requiresUpgrade||!e.$aioseo.license.isActive}])},[!t.feature.requiresUpgrade&&e.$aioseo.license.isActive&&(!t.feature.installed||t.feature.hasMinimumVersion)?(a(),l("div",G,[s.loading?(a(),h(w,{key:0,dark:""})):o("",!0),!s.loading&&t.feature.installedVersion?(a(),l("span",W,r(s.strings.version)+" "+r(t.feature.installedVersion),1)):o("",!0),n("span",j,r(s.activated?s.strings.activated:t.feature.installed||t.feature.canInstall?s.strings.deactivated:s.strings.notInstalled),1),t.feature.installed||t.feature.canInstall?(a(),h(V,{key:2,modelValue:s.activated,"onUpdate:modelValue":d.processStatusChange},null,8,["modelValue","onUpdate:modelValue"])):o("",!0)])):o("",!0),t.feature.requiresUpgrade||!e.$aioseo.license.isActive?(a(),l("div",x,[g(_,{type:"green",size:"medium",tag:"a",href:e.$isPro?e.$links.getUpsellUrl("feature-manager-upgrade",t.feature.sku,"pricing"):e.$links.getUpsellUrl("feature-manager-upgrade",t.feature.sku,"liteUpgrade"),target:"_blank"},{default:u(()=>[e.$isPro?(a(),l("span",J,r(s.strings.upgradeYourPlan),1)):o("",!0),e.$isPro?o("",!0):(a(),l("span",K,r(s.strings.upgradeToPro),1))]),_:1},8,["href"])])):o("",!0),e.$isPro&&!t.feature.requiresUpgrade&&t.feature.installed&&!t.feature.hasMinimumVersion?(a(),l("div",Q,[s.activated&&!s.loading?(a(),h(M,{key:0},{tooltip:u(()=>[f(r(s.strings.updateRequired)+" ",1),e.$addons.userCanUpdate(t.feature.sku)?o("",!0):(a(),l("strong",ee,r(s.strings.permissionWarning),1))]),default:u(()=>[n("span",X,r(s.strings.updateToVersion)+" "+r(t.feature.minimumVersion),1)]),_:1})):o("",!0),g(_,{type:"blue",size:"medium",onClick:d.processUpgradeFeature,loading:s.featureUpgrading,disabled:!e.$addons.userCanUpdate(t.feature.sku)},{default:u(()=>[f(r(s.strings.updateFeature),1)]),_:1},8,["onClick","loading","disabled"])])):o("",!0)],2)):o("",!0),s.showNetworkModal?(a(),h(H,{key:1,"no-header":"",onClose:i[4]||(i[4]=m=>d.closeNetworkModal(!1))},{body:u(()=>[n("div",te,[n("button",{class:"close",onClick:i[1]||(i[1]=C(m=>d.closeNetworkModal(!1),["stop"]))},[g(U,{onClick:i[0]||(i[0]=C(m=>d.closeNetworkModal(!1),["stop"]))})]),n("h3",null,r(s.strings.areYouSureNetworkChange),1),n("div",se,r(d.networkChangeMessage),1),g(_,{type:"blue",size:"medium",onClick:i[2]||(i[2]=m=>d.closeNetworkModal(!0))},{default:u(()=>[f(r(s.strings.yesProcessNetworkChange),1)]),_:1}),g(_,{type:"gray",size:"medium",onClick:i[3]||(i[3]=m=>d.closeNetworkModal(!1))},{default:u(()=>[f(r(s.strings.noChangedMind),1)]),_:1})])]),_:1})):o("",!0)])}const Ze=v(q,[["render",ae]]),ie={},re={viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ne=n("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11 15H7C5.35 15 4 13.65 4 12C4 10.35 5.35 9 7 9H11V7H7C4.24 7 2 9.24 2 12C2 14.76 4.24 17 7 17H11V15ZM17 7H13V9H17C18.65 9 20 10.35 20 12C20 13.65 18.65 15 17 15H13V17H17C19.76 17 22 14.76 22 12C22 9.24 19.76 7 17 7ZM16 11H8V13H16V11Z",fill:"currentColor"},null,-1),oe=[ne];function le(e,i){return a(),l("svg",re,oe)}const Be=v(ie,[["render",le]]),de={},ue={viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"aioseo-redirect"},ce=n("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.59 9.17L5.41 4L4 5.41L9.17 10.58L10.59 9.17ZM14.5 4L16.54 6.04L4 18.59L5.41 20L17.96 7.46L20 9.5V4H14.5ZM13.42 14.82L14.83 13.41L17.96 16.54L20 14.5V20H14.5L16.55 17.95L13.42 14.82Z",fill:"currentColor"},null,-1),he=[ce];function fe(e,i){return a(),l("svg",ue,he)}const $e=v(de,[["render",fe]]),ge={},_e={viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"aioseo-sitemaps-pro"},me=n("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M23.45 3.5H4.55C3.96667 3.5 3.5 3.96667 3.5 4.55V23.45C3.5 23.9167 3.96667 24.5 4.55 24.5H23.45C23.9167 24.5 24.5 23.9167 24.5 23.45V4.55C24.5 3.96667 23.9167 3.5 23.45 3.5ZM10.5 8.16667H8.16667V10.5H10.5V8.16667ZM19.8333 8.16667H12.8333V10.5H19.8333V8.16667ZM19.8333 12.8333H12.8333V15.1667H19.8333V12.8333ZM12.8333 17.5H19.8333V19.8333H12.8333V17.5ZM8.16667 12.8333H10.5V15.1667H8.16667V12.8333ZM10.5 17.5H8.16667V19.8333H10.5V17.5ZM5.83333 22.1667H22.1667V5.83333H5.83333V22.1667Z",fill:"currentColor"},null,-1),ve=[me];function pe(e,i){return a(),l("svg",_e,ve)}const qe=v(ge,[["render",pe]]);export{Ze as C,Be as S,$e as a,qe as b};
