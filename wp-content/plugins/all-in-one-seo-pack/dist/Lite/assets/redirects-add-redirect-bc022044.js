import{_,r as d,o as i,c as y,b as c,w as l,y as C,t as $,a as R,f as a,A}from"./js/_plugin-vue_export-helper.1252226d.js";import{l as w}from"./js/index.512f21c4.js";import{l as k}from"./js/index.c8bcf9e5.js";import{g as b,m as p,s as m}from"./js/index.fef507ce.js";import{C as v}from"./js/Portal.f89d3d99.js";import{C as E}from"./js/Index.4d718445.js";import{i as L}from"./js/isEmpty.a37ce9c8.js";import"./js/client.4d177be2.js";import"./js/_commonjsHelpers.f84db168.js";import"./js/vuex.esm-bundler.2e787911.js";import"./js/default-i18n.ab92175e.js";import"./js/helpers.de7566d0.js";import"./js/constants.449145d5.js";import"./js/isArrayLikeObject.da221b94.js";import"./js/Caret.21cdd163.js";import"./js/Index.67d5329e.js";import"./js/WpTable.6ebd2781.js";import"./js/Index.25975920.js";import"./js/Row.3c6833bf.js";import"./js/RequiresUpdate.52f5acf2.js";import"./js/postContent.d5640333.js";import"./js/cleanForSlug.3cf2e377.js";import"./js/html.14f2a8b9.js";import"./js/JsonValues.870a4901.js";import"./js/SaveChanges.03404395.js";import"./js/strings.d9eaf1a3.js";import"./js/isString.1ed890fc.js";import"./js/ProBadge.5deae80b.js";import"./js/External.e319cd0f.js";import"./js/Exclamation.b493e7b4.js";import"./js/Checkbox.01664e13.js";import"./js/Checkmark.b071baa5.js";import"./js/Gear.a5ac87f6.js";import"./js/Slide.8b22672f.js";import"./js/Tooltip.ce066015.js";import"./js/Plus.95ac3054.js";import"./js/_getTag.2bfb1432.js";const H={components:{CoreModalPortal:v,CoreAddRedirection:E},data(){return{urls:[],display:!1,target:null,loading:!1,strings:{modalHeader:this.$t.__("Add a Redirect",this.$td),redirectAdded:this.$t.sprintf(this.$t.__('%2$sYour redirect was added and you may edit it <a href="%1$s" target="_blank">here</a>.%3$s',this.$td),this.$aioseo.urls.aio.redirects,"<strong>","</strong>")},watchClasses:["aioseo-redirects-slug-changed","aioseo-redirects-trashed-post"]}},computed:{classSelectors(){return"."+this.watchClasses.join(", .")}},methods:{reload(){var e,o;this.display=!1;const t=(o=(e=this.target)==null?void 0:e.parentElement)==null?void 0:o.parentElement;if(t&&(t.classList.contains("components-notice__content")||t.classList.contains("notice"))){t.innerHTML="<p>"+this.strings.redirectAdded+"</p>";return}this.target.outerHTML=this.strings.redirectAdded},loadRedirect(t){this.loading=!0,this.$http.get(this.$links.restUrl("redirects/manual-redirects/"+t)).then(e=>{this.urls=e.body.redirects,this.loading=!1}).catch(e=>console.log("Redirect modal failed to load the redirect data.",e))},preloadRedirect(){const t=document.querySelector(this.classSelectors);if(t){const e=this.getElementRedirectHash(t);if(!e)return;this.loadRedirect(e)}},watchClicks(){document.body.onclick=t=>{var o;if(!((o=t.target)!=null&&o.classList))return;let e=!1;this.watchClasses.forEach(n=>{t.target.classList.contains(n)&&(e=!0)}),e&&(t.preventDefault(),this.target=t.target,this.display=!0,L(this.url)&&this.loadRedirect(this.getElementRedirectHash(this.target)))}},getElementRedirectHash(t){return new URLSearchParams(t.href).get("aioseo-manual-urls")}},async created(){const{addons:t,redirects:e}=await b(this.$.appContext.app);this.$store.state.addons=p([...this.$store.state.addons],[...t]),this.$store.state.redirects=p({...this.$store.state.redirects},{...e}),this.preloadRedirect(),this.watchClicks(),this.$bus.$on("wp-core-notice-created",()=>{this.preloadRedirect()})}},x={key:0,class:"aioseo-redirects-add-redirect-standalone"},S={class:"bd"};function P(t,e,o,n,s,h){const g=d("core-add-redirection"),f=d("core-modal-portal");return t.$addons.isActive("aioseo-redirects")?(i(),y("div",x,[s.display?(i(),c(f,{key:0,classes:["aioseo-redirects","modal"],onClose:e[0]||(e[0]=T=>s.display=!1)},{headerTitle:l(()=>[C($(s.strings.modalHeader),1)]),body:l(()=>[R("div",S,[s.loading?a("",!0):(i(),c(g,{key:0,urls:s.urls,target:s.urls[0].target?s.urls[0].target:"/",disableSource:!0,onAddedRedirect:h.reload},null,8,["urls","target","onAddedRedirect"]))])]),_:1})):a("",!0)])):a("",!0)}const B=_(H,[["render",P]]),u=document.createElement("div");u.id="aioseo-redirects-add-redirect-standalone";document.body.appendChild(u);let r=A(B);r=w(r);r=k(r);r.use(m);m._vm=r;r.config.globalProperties.$aioseo=window.aioseo;r.mount("#aioseo-redirects-add-redirect-standalone");
